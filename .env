# ============================================
# FastAPI Full Stack Template - 环境变量配置
# ============================================
# 复制此文件为 .env 并根据你的环境更新值
# cp env.example .env

# ============================================
# 项目配置
# ============================================
PROJECT_NAME=Meow Full Stack Frame
ENVIRONMENT=local  # 选项: local, staging, production
DOMAIN=localhost.tiangolo.com  # 本地开发使用
STACK_NAME=fullstack  # Docker 堆栈名称，用于 Traefik 标签

# ============================================
# 安全配置
# ============================================
# 生成新的密钥: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=changethis  # ⚠️ 生产环境必须修改此值！

# ============================================
# 前端配置
# ============================================
FRONTEND_HOST=http://localhost:5173
BACKEND_CORS_ORIGINS=["http://localhost:5173","http://localhost:3000","http://localhost:8080"]

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
POSTGRES_SERVER=db
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changethis  # ⚠️ 生产环境必须修改此值！
POSTGRES_DB=app

# ============================================
# Redis 配置
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # 可选：留空表示无密码

# ============================================
# 缓存配置
# ============================================
CACHE_EXPIRE_SECONDS=300  # 默认缓存过期时间：5分钟
CACHE_KEY_PREFIX=app:cache:

# ============================================
# ARQ 任务队列配置
# ============================================
# ARQ_REDIS_URL=  # 可选：为 ARQ 覆盖 Redis URL（默认使用 REDIS_URL）

# ============================================
# 限流配置
# ============================================
RATE_LIMIT_ENABLED=true
# RATE_LIMIT_STORAGE_URI=  # 可选：为限流覆盖 Redis URL（默认使用 REDIS_URL）
RATE_LIMIT_DEFAULT=100/minute  # 默认：每分钟 100 次请求
RATE_LIMIT_LOGIN=5/minute  # 登录：每分钟 5 次请求
RATE_LIMIT_REGISTER=3/minute  # 注册：每分钟 3 次请求
RATE_LIMIT_PASSWORD_RESET=3/hour  # 密码重置：每小时 3 次请求

# ============================================
# 国际化 (i18n) 配置
# ============================================
I18N_ENABLED=true
I18N_DEFAULT_LOCALE=zh_CN  # 默认语言：简体中文
I18N_SUPPORTED_LOCALES=["zh_CN","en_US"]  # 支持的语言列表
I18N_LOCALE_DIR=app/locales  # 翻译文件目录

# ============================================
# 文件上传配置
# ============================================
UPLOAD_DIR=uploads  # 文件上传基础目录
MAX_UPLOAD_SIZE=10485760  # 最大文件大小：10 MB（字节，10 * 1024 * 1024）
# ALLOWED_EXTENSIONS 和 ALLOWED_MIME_TYPES 在代码中配置

# ============================================
# 用户管理
# ============================================
FIRST_SUPERUSER=admin@example.com
FIRST_SUPERUSER_PASSWORD=changethis  # ⚠️ 生产环境必须修改此值！
EMAIL_TEST_USER=test@example.com

# ============================================
# 邮件配置 (SMTP)
# ============================================
# 本地开发使用 Mailcatcher（在 docker-compose.override.yml 中配置）
# SMTP_HOST=mailcatcher  # 本地开发
# SMTP_PORT=1025  # 本地开发
# SMTP_TLS=false  # 本地开发
# EMAILS_FROM_EMAIL=noreply@example.com  # 本地开发

# 生产环境，配置你的 SMTP 服务器：
SMTP_HOST=
SMTP_PORT=587
SMTP_TLS=true
SMTP_SSL=false
SMTP_USER=
SMTP_PASSWORD=
EMAILS_FROM_EMAIL=
EMAILS_FROM_NAME=  # 可选：默认为 PROJECT_NAME
EMAIL_RESET_TOKEN_EXPIRE_HOURS=48

# ============================================
# 监控和错误追踪
# ============================================
# Sentry DSN 用于错误追踪（可选）
# 从 https://sentry.io 获取你的 DSN
SENTRY_DSN=

# ============================================
# Docker 配置
# ============================================
DOCKER_IMAGE_BACKEND=full-stack-fastapi-template-backend
DOCKER_IMAGE_FRONTEND=full-stack-fastapi-template-frontend
TAG=latest

# ============================================
# Traefik 配置 (生产环境)
# ============================================
# 仅在生产环境使用 Traefik 部署时需要
# EMAIL=admin@example.com  # Let's Encrypt 证书的邮箱
# USERNAME=admin  # Traefik 仪表板 HTTP 基本认证用户名
# HASHED_PASSWORD=  # Traefik 仪表板密码哈希（使用: htpasswd -nb admin password）

# ============================================
# API 配置
# ============================================
# API_V1_STR=/api/v1  # 默认 API 前缀（在代码中配置）
# ACCESS_TOKEN_EXPIRE_MINUTES=11520  # 8 天（在代码中配置）

# ============================================
# 注意事项
# ============================================
# 1. 本地开发时，大多数默认值都可以使用
# 2. 生产环境：
#    - 修改所有 "changethis" 的值
#    - 配置正确的 SMTP 服务器
#    - 设置 Sentry 进行错误追踪
#    - 配置 Traefik 使用正确的域名和 SSL
#    - 使用强密码和密钥
# 3. Redis 密码是可选的，但生产环境建议设置
# 4. 文件上传目录会自动创建
# 5. 除非特别说明，所有路径都相对于 backend 目录
